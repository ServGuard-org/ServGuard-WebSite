<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ServGuard | Dashboard Uso Geral</title>
    <link rel="stylesheet" href="../../css/main.css" />
    <link
      rel="shortcut icon"
      href="../../assets/svg/logo-white.svg"
      type="image/x-icon"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>

  <body
    onload="carregarPagina(), obterDadosHistograma(), consultarMaquinas(), buscarUltimosDadosRede(sessionStorage.getItem('ID_EMPRESA_USUARIO')), buscarMaquinasConnect(sessionStorage.getItem('ID_EMPRESA_USUARIO'))"
  >
    <section id="page-dashboard-usoGeral">
      <header>
        <div class="child-navbar-card-dash-adm">
          <div class="navbar-logo-dash-adm">
            <img src="../../assets/svg/logo.svg" alt="#logo" />
          </div>
          <div class="navbar-navlink-dash-adm">
            <ul class="list-navlink-dash-adm">
              <li>
                <a href="../dashboard-adm.html" class="link-dash-adm active">
                  <img
                    src="../../assets/svg/layout-icon-white.svg"
                    alt="#icone-layout"
                  />
                </a>
                <p class="little-text mt-1">Início</p>
              </li>
              <li>
                <a href="../dashboard-analista.html" class="link-dash-adm">
                  <img src="../../assets/svg/search.svg" alt="#icone-layout" />
                </a>
                <p class="little-text mt-1">Detalhes</p>
              </li>
              <li>
                <a
                  href="../gerenciamento-funcionario.html"
                  class="link-dash-adm"
                >
                  <img
                    src="../../assets/svg/func-icon.svg"
                    alt="#icone-funcionario"
                  />
                </a>
                <p class="little-text mt-1">Funcionário</p>
              </li>
              <li>
                <a href="../gerenciamento-maquina.html" class="link-dash-adm">
                  <img src="../../assets/svg/server-icon.svg" alt="#icone-" />
                </a>
                <p class="little-text mt-1">Máquina</p>
              </li>
              <li>
                <a href="../detalhes-funcionario.html" class="link-dash-adm">
                  <img src="../../assets/svg/perfil-icon.svg" alt="#icone-" />
                </a>
                <p class="little-text mt-1">Perfil</p>
              </li>
            </ul>
          </div>
          <a href="#" class="navbar-exit-dash-adm" onclick="sairNavbar()">
            <img src="../../assets/svg/exit-icon.svg" alt="" />
          </a>
        </div>
      </header>

      <main>
        <div class="dash-alert-topo">
          <div class="link-back-seta">
              <a class="bold text-gray-dark" onclick="voltar()">
                  <div class="icon-trian"></div> Voltar para início
              </a>
          </div>
          <div class="dash-alert-titulo">
              <h1 class="bold">Monitoramento de Uso Geral:</h1>
              <!-- <p style="color: var(--normal-purple);" class="bold italic">Dados baseados nos ultimos 30 dias de monitoramento.</p> -->
          </div>
        </div>

        <div class="father-general-use">
          <div class="child-general-use">
            <div class="general-use-content-medium">
              <div class="general-use-father-three">
                <h4 class="bold center">Histograma de Uso de Hardware das Máquinas:</h4>
                <div class="space-graphic">

                </div>
              </div>
            </div>

            <div class="general-use-content-large">
              <div class="gerenal-use-father-one">
                <div class="general-use-cards-info">
                  <div class="card-info">
                    <h5 class="center">Quantidade de Máquinas com Uso de Hardware Maior que 80%</h5>
                    <h1 class="bold center">2</h1>
                  </div>
                  <div class="card-info">
                    <h5 class="center">Quantidade de Máquinas com Uso de Disco Maior que 80%</h5>
                    <h1 class="bold center">2</h1>
                  </div>
                </div>

                <div class="general-use-card-tendencia">
                  <h3 class="bold center">Tendência de Uso:</h3>
                  <p class="center">Acompanhe aqui as tendências de uso das máquinas, identificando padrões críticos de desempenho e antecipando possíveis sobrecargas.</p>
                  <button class="btn-dashboard" onclick="DashboardAnalista()">
                    Ver Análise de Uso
                  </button>
                </div>
                
              </div>
            </div>
          </div>
          <div class="child-general-use">
            <div class="general-use-content-medium">
              <div class="general-use-father-three">
                <h4 class="bold center">Histograma de Uso de Disco das Máquinas:</h4>
                <div class="space-graphic">

                </div>
              </div>
            </div>
            <div class="general-use-content-large">
              <div class="general-use-father-two">
                <div class="list-machine-menu">
                  <h3>Lista de Máquinas:</h3>
                </div>
                <div class="list-machine-card">
                  <div class="column-machine">
                    <div class="column-item">
                      <p class="little-text bold">ID</p>
                    </div>
                    <div class="column-item">
                      <p class="little-text bold">Hostname</p>
                    </div>
                    <div class="column-item">
                      <p class="little-text bold">Uso de Hardware</p>
                    </div>
                    <div class="column-item">
                      <p class="little-text bold">Uso de Disco</p>
                    </div>
                    <div class="column-item">
                      <p class="little-text bold">Problabilidade de Sobrecarga</p>
                    </div>
                  </div>

                  <hr class="line-list-machine">

                  <div class="machine-card-space">
                    <div class="machine-card">
                      <div class="column-item">
                        <p class="little-text bold">01</p>
                      </div>
                      <div class="column-item">
                        <p class="little-text bold">BOOK-1AMQ3DUG8E</p>
                      </div>
                      <div class="column-item">
                        <p class="little-text bold">80%</p>
                      </div>
                      <div class="column-item">
                        <p class="little-text bold">60%</p>
                      </div>
                      <div class="column-item">
                        <p class="little-text bold">95%</p>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </main>

    </section>

    <script>
      function sairNavbar() {
        event.preventDefault();
        sessionStorage.clear();
        window.location.href = "../index.html";
      }

      function DashboardAnalista() {
        window.location.href = "dashboard-analista.html";
      }
      function DashboardUsoGeral() {
        window.location.href =
          "../dashboard/dash-caio/dashboard-adm-alert.html";
      }
      function DashboardRede() {
        window.location.href =
          "../dashboard/dash-marcio/dashboard-adm-rede.html";
      }
      function DashboardAlerta() {
        window.location.href =
          "../dashboard/dash-caio/dashboard-adm-alert.html";
      }

      function voltar() {
        window.location.href = "../dashboard-adm.html";
    }
    function carregarPagina() {
        sessionStorage.removeItem("VOLTAR_PAGINA");
        sessionStorage.setItem("VOLTAR_PAGINA", "D_Alert");
        obterDadosDeApoio1()
        obterDadosDeApoio2()
        carregarListaAlertas()
        buscarDistribuicao()
        buscarDadosGrafico()
    }

      function ValidacaoCores(escolhaRecurso) {
        const elementoIrrCPU = document.getElementById("irr_cpu");
        const elementoIrrRAM = document.getElementById("irr_ram");
        const elementoIrrDisco = document.getElementById("irr_disco");
        var idHTML;

        if (escolhaRecurso == "irregularidadesCPU") {
          idHTML = elementoIrrCPU;
          valor = parseFloat(idHTML.innerText);
          console.log("idHTML de CPU:", valor);
        } else if (escolhaRecurso == "irregularidadesRAM") {
          idHTML = elementoIrrRAM;
          valor = parseFloat(idHTML.innerText);
          console.log("idHTML de RAM:", valor);
        } else if (escolhaRecurso == "irregularidadesDISCO") {
          idHTML = elementoIrrDisco;
          valor = parseFloat(idHTML.innerText);
          console.log("idHTML de DISCO:", valor);
        }

        if (valor <= 0) {
          // verde
          idHTML.classList.remove(
            "text-green",
            "text-red",
            "text-orange",
            "text-yellow",
            "text-gray"
          );
          idHTML.classList.add("text-green");
          // idHTML.innerHTML = idHTML;
        } else if (valor > 0 && valor < 15) {
          // amarelo
          idHTML.classList.remove(
            "text-green",
            "text-red",
            "text-orange",
            "text-yellow",
            "text-gray"
          );
          idHTML.classList.add("text-yellow");
          // idHTML.innerHTML = idHTML;
        } else if (valor >= 15 && valor < 25) {
          // laranja
          idHTML.classList.remove(
            "text-green",
            "text-red",
            "text-orange",
            "text-yellow",
            "text-gray"
          );
          idHTML.classList.add("text-orange");
          // idHTML.innerHTML = idHTML;
        } else if (valor >= 25) {
          // vermelho
          idHTML.classList.remove(
            "text-green",
            "text-red",
            "text-orange",
            "text-yellow",
            "text-gray"
          );
          idHTML.classList.add("text-red");
          // idHTML.innerHTML = idHTML;
        } else {
          // sem cor (teoricamente aqui é impossível)
          idHTML.classList.remove(
            "text-green",
            "text-red",
            "text-orange",
            "text-yellow",
            "text-gray"
          );
          idHTML.classList.add("text-gray");
          // idHTML.innerHTML = idHTML;
        }
      }
    </script>
  </body>
</html>
