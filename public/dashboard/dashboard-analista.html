<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ServGuard | Dashboard Analista</title>
  <link rel="stylesheet" href="../css/main.css" />
  <link rel="shortcut icon" href="../assets/svg/logo-white.svg" type="image/x-icon" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body onload="carregarPagina()">
  <section id="page-dashboard-analista">
    <header>
      <div class="child-navbar-card-dash-adm">
        <div class="navbar-logo-dash-adm">
          <img src="../assets/svg/logo.svg" alt="#logo" />
        </div>
        <div class="navbar-navlink-dash-adm">
          <ul class="list-navlink-dash-adm" id="ul-nav" style="display: none;">
            <li id="li-adm" style="display: flex;">
              <a href="dashboard-adm.html" class="link-dash-adm">
                <img src="../assets/svg/layout-icon.svg" alt="#icone-layout" />
              </a>
              <p class="little-text mt-1">Início</p>
            </li>
            <li>
              <a href="dashboard-analista.html" class="link-dash-adm active">
                <img src="../assets/svg/search-white.svg" alt="#icone-layout" />
              </a>
              <p class="little-text mt-1">Detalhes</p>
            </li>
            <li id="li-funcionario">
              <a href="./gerenciamento-funcionario.html" class="link-dash-adm">
                <img src="../assets/svg/func-icon.svg" alt="#icone-funcionario" />
              </a>
              <p class="little-text mt-1">Funcionário</p>
            </li>
            <li>
              <a href="./gerenciamento-maquina.html" class="link-dash-adm">
                <img src="../assets/svg/server-icon.svg" alt="#icone-" />
              </a>
              <p class="little-text mt-1">Máquina</p>
            </li>
            <li>
              <a href="detalhes-funcionario.html" class="link-dash-adm">
                <img src="../assets/svg/perfil-icon.svg" alt="#icone-" />
              </a>
              <p class="little-text mt-1">Perfil</p>
            </li>
          </ul>
        </div>
        <a href="#" class="navbar-exit-dash-adm" onclick="sairNavbar()">
          <img src="../assets/svg/exit-icon.svg" alt="" />
        </a>
      </div>
    </header>
    <main>
      <div class="coluna1-dash-analista">
        <div class="dash-analista-graphic">
          <div class="title-graphic">
            <h3 class="bold center">Componente:</h3>
            <select id="select-componente" class="select-componente bold">
              <option value="cpu">CPU</option>
              <option value="ram">RAM</option>
              <option value="disco">DISCO</option>
            </select>
          </div>
          <div class="graphic-space-analista">
            <canvas id="myHistogram"></canvas>
          </div>
        </div>

        <div class="coluna1-cards-row">
          <div class="div-perda-pacotes text-white">
            <h4 class="italic">PERDA DE PACOTES:</h4>
            <div class="perda-pacotes-organizar">
              <div class="perda-pacotes-dados">
                <h3 class="bold">Entrada</h3>
                <h1 class="bold" style="color: var(--red-normal);">50%</h1>
              </div>
              <div class="perda-pacotes-divisao"></div>
              <div class="perda-pacotes-dados">
                <h3 class="bold">Saída</h3>
                <h1 class="bold" style="color: var(--yellow-normal);">3%</h1>
              </div>
            </div>
          </div>
          <div class="div-servico-utilizado">
            <h4 class="bold">Serviço utilizado:</h4>
            <div class="servico">
              <h5 class="bold text-white">Banco central</h5>
              <h2 class="bold text-white" style="color: var(--green-dark);">Ativo</h2>
            </div>
          </div>
        </div>
      </div>

      <div class="coluna2-dash-analista">
        <div class="div-componente-problematico">
          <h4 class="bold">Recurso mais problemático:</h4>
          <h2 class="bold italic" style="color: var(--red-normal);">CPU</h2>
          <h4 class="bold">Possível ameaça:</h4>
          <h2 class="bold italic" style="color: var(--yellow-dark);">RAM</h2>
        </div>
        <div class="div-mapa-estabilidade">
          <h4 class="italic">Mapa de estabilidade</h4>
          <div class="mapa-colunas">
            <div style="width: 15%" class="mapa-espacamento">
              <h4 class="bold italic">ID</h4>
            </div>
            <div style="width: 37%" class="mapa-espacamento">
              <h4 class="bold italic">CPU</h4>
            </div>
            <div style="width: 37%" class="mapa-espacamento">
              <h4 class="bold italic">RAM</h4>
            </div>
          </div>

          <div class="map-row-itens">

            <!-- OBJETOS DA LISTA -->
            <div class="mapa-colunas">
              <div class="mapa-espacamento" style="width: 15%">
                <h4 class="bold">12</h4>
              </div>
              <div class="mapa-espacamento-objeto" style="background-color: var(--red-light)">
                <h4 class="bold">Crítico!</h4>
              </div>
              <div class="mapa-espacamento-objeto" style="background-color: var(--red-light)">
                <h4 class="bold">Crítico!</h4>
              </div>
            </div>
            <!-- OBJETOS DA LISTA - FIM -->
            <!-- OBJETOS DA LISTA -->
            <div class="mapa-colunas">
              <div class="mapa-espacamento" style="width: 15%">
                <h4 class="bold">12</h4>
              </div>
              <div class="mapa-espacamento-objeto" style="background-color: var(--yellow-light)">
                <h4 class="bold">Em alerta</h4>
              </div>
              <div class="mapa-espacamento-objeto" style="background-color: var(--yellow-light)">
                <h4 class="bold">Em alerta</h4>
              </div>
            </div>
            <!-- OBJETOS DA LISTA - FIM -->
            <!-- OBJETOS DA LISTA -->
            <div class="mapa-colunas">
              <div class="mapa-espacamento" style="width: 15%">
                <h4 class="bold">12</h4>
              </div>
              <div class="mapa-espacamento-objeto" style="background-color: var(--green-light)">
                <h4 class="bold">Normal</h4>
              </div>
              <div class="mapa-espacamento-objeto" style="background-color: var(--green-light)">
                <h4 class="bold">Normal</h4>
              </div>
            </div>
            <!-- OBJETOS DA LISTA - FIM -->

          </div>
        </div>
      </div>
    </main>
  </section>
  <script>
    function sairNavbar() {
      event.preventDefault();
      sessionStorage.clear();
      window.location.href = "../index.html";
    }

    const data = {
      //aqui precisa ser a listagem de máquinas por ID
      labels: [
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        "10",
        "11",
        "12",
        "13",
        "14",
        "15",
        "16",
      ],
      datasets: [
        {
          label: "Percentual de Uso (%)",
          data: [
            10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 90, 80, 70, 60, 80, 90,
          ],
          backgroundColor: "#8a4dfb",
          borderColor: "#4E2E9E",
          borderWidth: 2,
          // barThickness: 58, // Ajuste da largura das barras em pixels
          borderRadius: 5, // Ajuste do border-radius
          borderSkipped: false,
        },
      ],
    };

    const config = {
      type: "bar",
      data: data,
      options: {
        responsive: true, // Para tornar o gráfico responsivo
        maintainAspectRatio: false, // Define se a proporção deve ser mantida
        plugins: {
          legend: {
            display: false,
          },
        },
        scales: {
          x: {
            title: {
              display: true,
              text: "Máquinas por ID",
              beginAtZero: true,
            },
            beginAtZero: true,
            grid: {
              display: false,
            },
          },
          y: {
            title: {
              display: true,
              text: "Uso em %",
              beginAtZero: true,
            },
            beginAtZero: true,
            grid: {
              display: false,
            },
          },
        },
      },
    };

    const myHistogram = new Chart(
      document.getElementById("myHistogram"),
      config
    );

    function verificarCargo(){
      var isADM = sessionStorage.getItem("IS_ADM_USUARIO");
      if (isADM !== null && Number(isADM) === 0) {
        document.getElementById('li-adm').style.display = 'none';
        document.getElementById('li-funcionario').style.display = 'none';
        document.getElementById('ul-nav').style.display = 'flex';
      } else {
        document.getElementById('li-adm').style.display = 'flex';
        document.getElementById('li-funcionario').style.display = 'flex';
        document.getElementById('ul-nav').style.display = 'flex';
      }
    }

    function carregarPagina() {
      verificarCargo()
      let escalaInstabilidade = 0;

      const elementoInstabilidade = document.getElementById(
        "escala-instabilidade"
      );

      elementoInstabilidade.innerHTML = "";
      elementoInstabilidade.innerHTML = escalaInstabilidade;

      switch (escalaInstabilidade) {
        case 0:
          // verde
          break;
        case 1:
          // amarelo
          break;
        case 2:
          // laranja
          break;
        case 3:
          // vermelho
          break;
      }
    }
  </script>
</body>

</html>